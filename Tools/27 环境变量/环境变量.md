* [UNIX / Linux set your PATH Variable Using set or export Command](https://www.cyberciti.biz/faq/unix-linux-adding-path/)



好的，我们来全面、系统地讲解 macOS 中的环境变量，包括它的概念、查看、设置方法以及各种配置文件的区别。

### 一、什么是环境变量？

环境变量是在操作系统或程序运行时使用的动态命名值。它们就像是程序的“全局设置”。

**常见环境变量示例：**

| 变量名      | 作用                                  |
| :---------- | :------------------------------------ |
| `PATH`      | 指定系统查找命令/可执行文件的目录列表 |
| `HOME`      | 当前用户的主目录路径                  |
| `JAVA_HOME` | 指定 JDK 的安装位置                   |
| `SHELL`     | 指定当前使用的 Shell 程序             |

---

### 二、如何查看环境变量？

在终端中，有多种命令可以查看环境变量：

| 命令                  | 作用                                |
| :-------------------- | :---------------------------------- |
| `echo $VARIABLE_NAME` | 打印**指定**环境变量的值            |
| `printenv`            | 打印**所有**环境变量                |
| `env`                 | 功能同 `printenv`，打印所有环境变量 |

**常用示例：**
```bash
# 查看 PATH
$ echo $PATH

# 查看 JAVA_HOME
$ echo $JAVA_HOME

# 查看所有环境变量
$ printenv
$ env
```

---

### 三、如何设置环境变量？

设置环境变量分为 **临时设置** 和 **永久设置**。

#### 1. 临时设置（仅对当前终端会话有效）

关闭终端窗口后，设置即失效。

```bash
# 语法
export VARIABLE_NAME="value"

# 示例：设置 JAVA_HOME
export JAVA_HOME="/Library/Java/JavaVirtualMachines/jdk-11.0.1.jdk/Contents/Home"

# 示例：将新路径添加到 PATH
export PATH="$JAVA_HOME/bin:$PATH"
```

#### 2. 永久设置（持久化配置）

这是通过修改 Shell 的配置文件来实现的。首先，你需要知道当前使用的是哪种 Shell。

**步骤 1：确定你的 Shell**
```bash
$ echo $SHELL
```
- 输出 `/bin/zsh` → 你在使用 **Zsh** (macOS Catalina 及之后版本的默认 Shell)
- 输出 `/bin/bash` → 你在使用 **Bash** (macOS Catalina 之前版本的默认 Shell)

**步骤 2：编辑对应的配置文件**

| Shell    | 配置文件                         |
| :------- | :------------------------------- |
| **Zsh**  | `~/.zshrc`                       |
| **Bash** | `~/.bash_profile` 或 `~/.bashrc` |

**操作流程：**
1.  使用 `nano` 或 `vim` 等编辑器打开配置文件。
    ```bash
    # 如果使用 Zsh
    $ nano ~/.zshrc
    
    # 如果使用 Bash
    $ nano ~/.bash_profile
    ```

2.  在文件末尾添加你的环境变量设置。
    ```bash
    # 设置 JAVA_HOME
    export JAVA_HOME=$(/usr/libexec/java_home -v 11)
    
    # 将 $JAVA_HOME/bin 添加到 PATH 的最前面
    export PATH="$JAVA_HOME/bin:$PATH"
    
    # 设置 Maven Home（示例）
    export MAVEN_HOME="/opt/apache-maven-3.8.1"
    export PATH="$MAVEN_HOME/bin:$PATH"
    ```
    **关键技巧**：在添加路径到 `PATH` 时，使用 `$PATH:$NEW_PATH` 是将新路径加在**后面**，而 `$NEW_PATH:$PATH` 是将新路径加在**前面**。系统会优先查找前面的路径。

3.  保存文件并退出编辑器。
    - 在 `nano` 中：按 `Ctrl + O` 保存，按 `Ctrl + X` 退出。

4.  让配置**立即生效**。
    ```bash
    # 如果使用 Zsh
    $ source ~/.zshrc
    
    # 如果使用 Bash
    $ source ~/.bash_profile
    ```
    或者，更简单的方法是**重新打开一个终端窗口**。

---

### 四、macOS 环境变量配置文件详解

关键在于你启动的 Shell 是 **Login Shell** 还是 **Non-Login Shell**。

- **Login Shell**：整个系统登录、通过 `-l` 或 `--login` 参数启动的 Shell。它**不会**读取 `~/.zshrc` 或 `~/.bashrc`。
- **Non-Login Shell**：绝大多数时候我们打开的终端窗口、新标签页。它**只会**读取 `~/.zshrc` (Zsh) 或 `~/.bashrc` (Bash)。

**最佳实践与总结：**

| Shell    | 主要配置文件      | 用途                                                         |
| :------- | :---------------- | :----------------------------------------------------------- |
| **Zsh**  | `~/.zshrc`        | **绝大多数情况下，你应该把配置放在这里！** 因为它对所有终端窗口都生效。 |
| **Bash** | `~/.bash_profile` | 如果你使用 Bash，把配置放在这里。可以在其中添加 `source ~/.bashrc` 来同时读取 `.bashrc`。 |

---

### 五、检查与验证

配置完成后，使用以下命令验证是否设置成功：

```bash
# 检查变量是否设置
$ echo $JAVA_HOME

# 检查命令路径是否正确
$ which java
$ which mvn

# 检查版本
$ java -version
$ mvn -version
```

#### 1. 在 `.zshrc` 中搜索
使用 `grep` 命令在你的 `.zshrc` 文件中搜索 `HOME` 或 `export HOME`：

```sh
$ grep HOME ~/.zshrc
```



### 总结

1.  **概念**：环境变量是系统的全局设置。
2.  **查看**：使用 `echo $NAME` 或 `printenv`。
3.  **设置**：
    - **临时**：在终端直接 `export`。
    - **永久**：编辑 Shell 配置文件（Zsh 用 `~/.zshrc`，Bash 用 `~/.bash_profile`）。
4.  **生效**：使用 `source` 命令或重启终端。
5.  **关键**：将所需工具的 `bin` 目录添加到 `PATH` 变量中，系统才能找到对应的命令。

按照这个指南，你就能轻松地管理和配置 macOS 下的环境变量了。
